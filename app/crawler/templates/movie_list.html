{% extends 'base.html' %}

{% block page-header %}
    <div class="page-header">
        <a href="/" class="top-menu" style="margin-top: 29px; font-size: 22pt;"><span class="glyphicon glyphicon-home"></span></span></a>
        <h1><a>Recommended Movies</a></h1>
    </div>
{% endblock %}

{% block content %}
    <p style="font-family: 'Lato', sans-serif; font-size: 12pt; font-weight: 700; margin-bottom: 5px;">Sort by:
        <form action="sort_by">{% csrf_token %}
            <select name="sort_var" id="sort_var" onChange="form.submit();">
                {% if selected == 7 %}
                    <option value="recommended_value" selected>Recommended</option>
                {% else %}
                    <option value="recommended_value">Recommended</option>
                {% endif %}

                {% if selected == 0 %}
                    <option value="imdb_rating" selected>IMDb Rating</option>
                {% else %}
                    <option value="imdb_rating">IMDb Rating</option>
                {% endif %}

                {% if selected == 1 %}
                    <option value="runtime_low_to_high" selected>Runtime: Low to High</option>
                {% else %}
                    <option value="runtime_low_to_high">Runtime: Low to High</option>
                {% endif %}

                {% if selected == 2 %}
                    <option value="runtime_high_to_low" selected>Runtime: High to Low</option>
                {% else %}
                    <option value="runtime_high_to_low">Runtime: High to Low</option>
                {% endif %}

                {% if selected == 3 %}
                    <option value="release_year_old_to_new" selected>Release Year: Old to New</option>
                {% else %}
                    <option value="release_year_old_to_new">Release Year: Old to New</option>
                {% endif %}

                {% if selected == 4 %}
                    <option value="release_year_new_to_old" selected>Release Year: New to Old</option>
                {% else %}
                    <option value="release_year_new_to_old">Release Year: New to Old</option>
                {% endif %}

                {% if selected == 5 %}
                    <option value="box_office_low_to_high" selected>Box Office: Low to High</option>
                {% else %}
                    <option value="box_office_low_to_high">Box Office: Low to High</option>
                {% endif %}

                {% if selected == 6 %}
                    <option value="box_office_high_to_low" selected>Box Office: High to Low</option>
                {% else %}
                    <option value="box_office_high_to_low">Box Office: High to Low</option>
                {% endif %}
            </select>
        </form>
    </p>
    <p style="font-family: 'Lato', sans-serif; font-size: 12pt; font-weight: 700; margin-bottom: 5px;">Filter by:
        <form action="filter_by" method="POST">{% csrf_token %}
            <input type="text" name="min_imdb_rating" placeholder="Min IMDb Rating..." style="height: 20px; width: 185px;"><br>
            <input type="text" name="min_runtime" placeholder="Min Runtime..." style="height: 20px; width: 185px; margin-top: 6px;">
            <input type="text" name="max_runtime" placeholder="Max Runtime..." style="height: 20px; width: 185px;"><br>
            <input type="text" name="min_release_year" placeholder="Min Release Year..." style="height: 20px; width: 185px; margin-top: 6px;">
            <input type="text" name="max_release_year" placeholder="Max Release Year..." style="height: 20px; width: 185px;"><br>
            <input type="text" name="min_box_office" placeholder="Min Box Office..." style="height: 20px; width: 185px; margin-top: 6px;">
            <input type="text" name="max_box_office" placeholder="Max Box Office..." style="height: 20px; width: 185px;"><br>
            
            {% if checked.0 == 1 %}
                <input type="Checkbox" name="action" style="margin-top: 10px;" checked>Action
            {% else %}
                <input type="Checkbox" name="action" style="margin-top: 10px;">Action  
            {% endif %}

            {% if checked.1 == 1 %}
                <input type="Checkbox" name="adventure" checked>Adventure 
            {% else %}
                <input type="Checkbox" name="adventure">Adventure 
            {% endif %}

            {% if checked.2 == 1 %} 
                <input type="Checkbox" name="animation" checked>Animation
            {% else %}
                <input type="Checkbox" name="animation">Animation
            {% endif %}

            {% if checked.3 == 1 %}  
                <input type="Checkbox" name="biography" checked>Biography
            {% else %}
                <input type="Checkbox" name="biography">Biography
            {% endif %}

            {% if checked.4 == 1 %}
                <input type="Checkbox" name="comedy" checked>Comedy<br>
            {% else %}
                <input type="Checkbox" name="comedy">Comedy<br>
            {% endif %}

            {% if checked.5 == 1 %}
                <input type="Checkbox" name="crime" style="margin-top: 6px;" checked>Crime
            {% else %}
                <input type="Checkbox" name="crime" style="margin-top: 6px;">Crime
            {% endif %}

            {% if checked.6 == 1 %}
                <input type="Checkbox" name="documentary" checked>Documentary
            {% else %}
                <input type="Checkbox" name="documentary">Documentary
            {% endif %}

            {% if checked.7 == 1 %}
                <input type="Checkbox" name="drama" checked>Drama
            {% else %}
                <input type="Checkbox" name="drama">Drama
            {% endif %}

            {% if checked.8 == 1 %}
                <input type="Checkbox" name="fantasy" checked>Fantasy
            {% else %}
                <input type="Checkbox" name="fantasy">Fantasy
            {% endif %}

            {% if checked.9 == 1 %}
                <input type="Checkbox" name="history" checked>History<br>
            {% else %}
                <input type="Checkbox" name="history">History<br>
            {% endif %}

            {% if checked.10 == 1 %}
                <input type="Checkbox" name="horror" style="margin-top: 6px;" checked>Horror
            {% else %}
                <input type="Checkbox" name="horror" style="margin-top: 6px;">Horror
            {% endif %}

            {% if checked.11 == 1 %}
                <input type="Checkbox" name="musical" checked>Musical
            {% else %}
                <input type="Checkbox" name="musical">Musical
            {% endif %}

            {% if checked.12 == 1 %}
                <input type="Checkbox" name="mystery" checked>Mystery
            {% else %}
                <input type="Checkbox" name="mystery">Mystery
            {% endif %}

            {% if checked.13 == 1 %}
                <input type="Checkbox" name="romance" checked>Romance
            {% else %}
                <input type="Checkbox" name="romance">Romance
            {% endif %}

            {% if checked.14 == 1 %}
                <input type="Checkbox" name="sci_fi" checked>Sci-Fi<br>
            {% else %}
                <input type="Checkbox" name="sci_fi">Sci-Fi<br>
            {% endif %}

            {% if checked.15 == 1 %}
                <input type="Checkbox" name="sport" style="margin-top: 6px;" checked>Sport
            {% else %}
                <input type="Checkbox" name="sport" style="margin-top: 6px;">Sport
            {% endif %}

            {% if checked.16 == 1 %}
                <input type="Checkbox" name="thriller" style="margin-top: 6px;" checked>Thriller
            {% else %}
                <input type="Checkbox" name="thriller" style="margin-top: 6px;">Thriller
            {% endif %}

            {% if checked.17 == 1 %}
                <input type="Checkbox" name="war" checked>War
            {% else %}
                <input type="Checkbox" name="war">War
            {% endif %}

            {% if checked.18 == 1 %}
                <input type="Checkbox" name="western" checked>Western<br>
            {% else %}
                <input type="Checkbox" name="western">Western<br>
            {% endif %}
            
            <input type="submit" style="margin-top: 6px; height: 25px; width: 68px;">
        </form>
    </p>
    <p style="font-family: 'Lato', sans-serif; font-size: 12pt; font-weight: 700; margin-bottom: 5px;">Reset filters:
        <form action="movies">
            <input type="submit" value="Reset" style="height: 25px; width: 68px;">
        </form>
    </p>
    <p style="font-family: 'Lato', sans-serif; font-size: 12pt; font-weight: 700; margin-bottom: 5px;">Clear all movies:
        <form action="movies/clear_all" method="DELETE">{% csrf_token %}
            <input type="submit" value="Clear all" style="height: 27px; width: 68px;"></input>
        </form>
    </p>
    <hr>
    <form action="search" method="POST">{% csrf_token %}
        <input type="text" name="search" placeholder="Search for a movie name, actor, or director..." style="height: 26px; width: 370px;">
        <input type="submit" name="submit" style="height: 25px; width: 68px;">
        <input type="submit" name="reset" style="height: 25px; width: 68px;" value="Reset">
    </form>
    {% for movie in movies %}
        <div class="card" style="box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2); transition: 0.3s;">
            <div class="movie" style="margin-bottom: 30px; padding: 1px 16px 25px;">
                <form action="clear_movie" method="POST">{% csrf_token %}
                    <input type="image" src="../static/images/remove_movie.png" name="movie_name" value="{{movie.url_name}}" style="float: right; width: 3%; margin-top: 8px;">
                </form>
                <a href={{movie.url}}><img src={{movie.poster}} alt="Avatar" style="width: 17%; align=left; margin-right: 13px; float: left;"></img></a>
                <h1><a href={{movie.url}} style="font-size: 25pt;">{{ forloop.counter }}. {{ movie.name }}</a></h1>
                {% if movie.box_office == 0 %}
                    <p>{{ movie.release_year }}, {{ movie.runtime_str }}, IMDb Rating: {{ movie.imdb_rating }}, Rotten Tomatoes: ({{ movie.tomatoes_critic_rating }}% critic, {{ movie.tomatoes_user_rating }}% user), {{ movie.recommended_value }}<br>Actors: {{ movie.actors }}, Directors: {{ movie.directors }}<br>Genres: {{ movie.genres }}<br>Box Office: Unknown<br>
                        <form action="rate_movie" method="POST">{% csrf_token %}
                            <input type="text" name="rated_value" style="height: 25px; width: 25px;">
                            <input type="submit" style="height: 25px; width: 68px;" value="Rate">
                            <input type="hidden" name="rated_movie" value="{{movie.url_name}}">
                        </form>
                    </p>
                {% else %}
                    <p>{{ movie.release_year }}, {{ movie.runtime_str }}, IMDb Rating: {{ movie.imdb_rating }}, Rotten Tomatoes: ({{ movie.tomatoes_critic_rating }}% critic, {{ movie.tomatoes_user_rating }}% user), {{ movie.recommended_value }}<br>Actors: {{ movie.actors }}, Directors: {{ movie.directors }}<br>Genres: {{ movie.genres }}<br>Box Office: {{ movie.box_office_str }}<br>
                        <form action="rate_movie" method="POST">{% csrf_token %}
                            <input type="text" name="rated_value" style="height: 25px; width: 25px;">
                            <input type="submit" style="height: 25px; width: 68px;" value="Rate">
                            <input type="hidden" name="rated_movie" value="{{movie.url_name}}">
                        </form>
                    </p>
                {% endif %}
            </div>
        </div>
    {% endfor %}
{% endblock %}
